@(user: User, applications: List[BreakpointApplication])(implicit flash: Flash, l: Lang)

@main(Messages("applications.myApplications.title"), user = Some(user), flash = flash) {
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
@flash.get("success").map { message =>
  <div class="flash success">@message</div>
}

<div class="lightbg padtop padbottom shadow clearfix" style="z-index: 9;">
  <div class="constraint">
    <h1 class="nomargin left">@Messages("applications.myApplications.my_applications")</h1>
    <a href="@routes.BreakpointApplicationController.newApplication">
      <button class="submit_button pad right" style="width: 250px;">@Messages("applications.newApplication.new_application")</button>
    </a>
  </div>
</div>
@if(applications.length > 0) {
  @applications.map { application =>
    <div class="whitebg padtop padbottom raiseshadow clearfix" style="z-index: 10;">
      <div class="constraint">
        <script type="text/javascript">
          google.load("visualization", "1", {packages:["corechart"]});
          google.setOnLoadCallback(drawChart);
          function drawChart() {
            var data = google.visualization.arrayToDataTable([
              ['Weeks Ago', 'Evaluations'],
              ['7', @scala.util.Random.nextInt(100)],
              ['6', @scala.util.Random.nextInt(100)],
              ['5', @scala.util.Random.nextInt(100)],
              ['4', @scala.util.Random.nextInt(100)],
              ['3', @scala.util.Random.nextInt(100)],
              ['2', @scala.util.Random.nextInt(100)],
              ['1', @scala.util.Random.nextInt(100)],
              ['0', @scala.util.Random.nextInt(100)]
            ]);
     
            var options = {
              'axisTitlesPosition': 'none',
              'titlePosition': 'none',
              'legend': 'none',
              'axisFontSize': 0,
              'vAxis': {
                'baselineColor': 'none',
                'textPosition': 'none'
              },
              'backgroundColor': 'transparent'
            }
     
            var chart = new google.visualization.LineChart(document.getElementById('bpa_@application.id.get'));
            chart.draw(data, options);
            }
        </script>
   
        <div class="application clearfix">
          <span class="left">
            <a class="application_name" href="@routes.BreakpointApplicationController.application(application.id.get)">@application.name</a>
            <p>@application.description</p>
            <p>
              @if(application.allowAnonymousEvals) {
                @Messages("applications.myApplications.allow_anonymous_evals")
              } else {
                @Messages("applications.myApplications.dont_allow_anonymous_evals")
              }
            </p>
          </span>
          <span class="right">
            <div id="bpa_@application.id.get" style="width: 400px; height: 120px;"></div>
          </span>
        </div>
      </div>
    </div>
  }
} else {
  <div class="whitebg padtop padbottom raiseshadow clearfix topmargin" style="z-index: 10;">
    <div class="constraint">
      <p>You don't seem to have access to any applications. Create one by clicking the big green button above. </p>
    </div>
  </div>
}
    

<!--
<div class="lightbg padtop padbottom shadow clearfix" style="z-index: 9;">
  <div class="constraint">
    <h1 class="nomargin">@Messages("applications.myApplications.application_showcase")</h1>
    <p>@Messages("applications.myApplications.application_showcase_description")</p>
  </div>
</div>
-->
}
