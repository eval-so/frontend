@(user: User, userForm: Form[User])(implicit flash: Flash, l: Lang)
@import helper._
@implicitField = @{ FieldConstructor(views.html.helpers.f) }

@main(Messages("user.profile.title"), showSubHeader = false, user = Some(user)) {
<div class="lightbg padtop padbottom shadow clearfix" style="z-index: 9;">
  <div class="constraint">
    <h1 class="nomargin left">
      @user.name (@user.username)
    </h1>
    <a href="@routes.BreakpointApplicationController.newApplication">
      <button class="submit_button pad right" style="width: 250px;">@Messages("applications.newApplication.new_application")</button>
    </a>
  </div>
</div>

<div class="whitebg padtop padbottom raiseshadow clearfix" style="z-index: 10;">
  <div class="constraint">
    <div class="left halfwidth">
      @helper.form(action = routes.UserController.register, 'id -> "user_form") {
        @helper.inputText(userForm("name"), '_label -> Messages("common.full_name"))
        @helper.inputText(userForm("username"), '_label -> Messages("common.username"))
        @helper.inputText(userForm("email"), '_label -> Messages("common.email"), '_help -> "")
        @helper.inputPassword(userForm("password"), '_label -> Messages("common.password"), '_help -> "")
        <p class="disclaimer">
          @Messages("user.profile.password_change_note")
        </p>
        <button type="submit" class="submit_button pad">@Messages("common.save")</button>
      }
    </div>
    <div class="right halfwidth">
      <h3 class="nomargin">@Messages("common.secret_key")</h3>
      <code>@user.secretKey</code>
      <p style="font-size: small;">@Messages("user.profile.change_secret_key")</p>
      @helper.form(action = routes.UserController.changeSecretKey, 'id -> "change_secret_key_form") {
        <button type="submit"
                class="danger_button pad"
                onclick="return confirm('Are you sure you want to reset your secret key?');">
          @Messages("user.profile.change_secret_key_link")
        </button>
      }
    </div>
  </div>
</div>
}
